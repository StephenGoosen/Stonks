<!-- stocks_page.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Stocks Page</title>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    
    <!-- Include Select2 CSS and JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    
    <!-- Your custom JavaScript file (if any) -->
    <script src="../staticfiles/admin/js/custom_select_stock.js"></script>

</head>
<body>

<h2>Stocks Page</h2>

<!-- Your form for selecting stock and number of years goes here -->
<form method="post" action="{% url 'stocks_page' %}">
    {% csrf_token %}
    <label for="stock_symbol">Select Stock Symbol:</label>
    <select class="js-select2" name="stock_symbol" id="stock_symbol" required>
        <!-- Populate options dynamically or manually -->
        {% for symbol in stock_symbols %}
            <option value="{{ symbol }}">{{ symbol }}</option>
        {% endfor %}
    </select>
    <br>
    <label for="num_years">Select Number of Years:</label>
    <input type="number" name="num_years" id="num_years" min="1" required>
    <br>
    <button type="submit">Generate Plot</button>
</form>

{% if image_path %}
    <h3>{{ stock_symbol }} Closing Prices Over Time</h3>
    <img src="../staticfiles/admin/img/{{ image_path }}" alt="Stock Plot">
{% else %}
    {% if stock_symbol %}
        <p>No data available for {{ stock_symbol }}.</p>
    {% else %}
        <p>Select a stock symbol and enter the number of years to generate a plot.</p>
    {% endif %}
{% endif %}

</body>
</html>